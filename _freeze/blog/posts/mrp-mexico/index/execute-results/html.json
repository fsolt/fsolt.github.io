{
  "hash": "ec569b5511e7cb977b784e0bd0670172",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Estimating Public Opinion in Mexico's States With MRP\"\nauthor: \"Frederick Solt\"\ndate: '2024-10-10'\ncategories:\n  - note\nbibliography: /Users/fsolt/Library/texmf/bibtex/bib/FSLibrary.bib\ncsl: /Users/fsolt/Library/texmf/bibtex/csl/american-political-science-association2.csl\neditor: source\ndraft: TRUE\noutput:\n  html_document:\n    self_contained: yes\ndescription: \"...\"\n---\n\n\n[Before 2021, when it switched to RDD](https://www.vanderbilt.edu/lapop/ab2021/AB2021-Technical-Report-v1.0-FINAL-eng-030722.pdf), the AmericasBarometer used cluster sampling, [\"stratified by major regions of the country, size of municipality and by urban and rural areas within municipalities\"](https://www.vanderbilt.edu/lapop/ab2018/AmericasBarometer_2018-19_Technical_Report_W_102919.pdf).\nThis means that [standard MRP approaches don't work very well](https://osf.io/preprints/socarxiv/gmyjh): they assume respondents to be randomly selected from the states, not clustered within just one or a few locations within the state.\nFor example, in the 2019 AmericasBarometer, not only were just 12 respondents surveyed in Aguascalientes, but they all lived in within the urban areas of two municipalities with fewer than 25,000 residents.\nAlthough MRP is designed to take into account the unrepresentativeness of a state's survey sample, clustering makes this unrepresentativeness particularly extreme.\nThe solution is to add the strata to the MRP model [@Auslen2024].\n\nI start with the [2018/2019 AmericasBarometer file for Mexico](http://datasets.americasbarometer.org/database/files/Mexico%20LAPOP%20AmericasBarometer%202019%20v1.0_W.dta).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nas_factor_stata <- function(x) {\n  x %>% \n    labelled::labelled(., attr(., \"labels\")) %>%\n    labelled::to_factor(levels = \"labels\", sort_levels = \"values\")\n}\n\namb_mexico2018 <- rio::import(\"~/Documents/Projects/Data/dcpo_surveys/misc_files/amb_files/amb_mexico2018/amb_mexico2018.RData\",\n                              trust = TRUE) %>% \n  mutate(region = as_factor_stata(estratopri),\n         state = as_factor_stata(prov),\n         muni_size = as_factor_stata(estratosec),\n         rural = as_factor_stata(ur)) \n```\n:::\n\n\nMexico's \"major regions\" are encoded in the variable `estratopri`; the states in each region are shown in @tbl-states-region.\n\n\n::: {#tbl-states-region .cell tbl-cap='Mexican States By Region' tbl-colwidths='[20,70]'}\n::: {.cell-output-display}\n\n\n|region           |states                                                                                                                                  |\n|:----------------|:---------------------------------------------------------------------------------------------------------------------------------------|\n|Norte            |Baja California, Baja California Sur, Coahuila, Chihuahua, Durango, Nuevo León, San Luis Potosí, Sinaloa, Sonora, Tamaulipas, Zacatecas |\n|Centro Occidente |Aguascalientes, Colima, Guanajuato, Jalisco, Michoacán, Nayarit                                                                         |\n|Centro           |Distrito Federal, Hidalgo, Estado de México, Morelos, Puebla, Querétaro, Tlaxcala                                                       |\n|Sur              |Campeche, Chiapas, Guerrero, Oaxaca, Quintana Roo, Tabasco, Veracruz, Yucatán                                                           |\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}